<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Sys PÃ£o - Sistema de GestÃ£o</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    ğŸ¥– Sys PÃ£o - Sistema de GestÃ£o
  </header>

  <!-- Tela de Login -->
  <div id="loginScreen" class="login-form">
    <h2>ğŸ” Acesso ao Sistema</h2>
    <div class="login-info-msg">
      <strong>ğŸ“š USO PARA FINS DIDÃTICOS<br>
<br>
CETEP RecÃ´ncavo Santo AntÃ´nio de Jesus<br>
Curso: TÃ©c. em AdministraÃ§Ã£o - 3Âº Noturno<br>
Professora: Luana Lemos<br>
Disciplina: SIG<br>
Equipe: Crislane, Raissa, Ketlhen, Leandro</strong><br>
      
    </div>
    <div class="form-group">
      <label for="username">ğŸ‘¤ UsuÃ¡rio</label>
      <input type="text" id="username" autocomplete="username" placeholder="Digite: admin" onkeydown="loginComEnter(event)">
    </div>
    <div class="form-group">
      <label for="password">ğŸ”‘ Senha</label>
      <input type="password" id="password" autocomplete="current-password" placeholder="Digite: admin" onkeydown="loginComEnter(event)">
    </div>
    <button onclick="login()">Entrar no Sistema</button>
    <div id="loginError" class="notification error hidden"></div>
  </div>

  <!-- Sistema Principal -->
  <main id="mainScreen" class="hidden">

    <!-- MENU HAMBURGUER -->
    <div class="menu-hamburger" id="hamburgerMenuContainer" style="display:none;">
      <button class="hamburger" id="btnHamburger" aria-label="Abrir menu" onclick="toggleMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <span style="font-size:1.1em;color:#7a3e1f;font-weight:bold;">â˜° Menu de NavegaÃ§Ã£o</span>
      <button onclick="logout()" style="margin-left:auto;background:linear-gradient(135deg, #ca5507 0%, #9a4005 100%);color:#fff;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;font-weight:600;box-shadow: 0 3px 10px rgba(202, 85, 7, 0.3);">ğŸšª Sair</button>
    </div>

    <!-- Menu overlay flutuante -->
    <div class="menu-options" id="menuOptions">
      <div class="menu-box">
        <h3>ğŸ“‹ NavegaÃ§Ã£o</h3>
        <button onclick="routeMenu('dashboard')" id="menuDashBtn" class="active">ğŸ  Dashboard</button>
        <button onclick="routeMenu('produtos')" id="menuProBtn">ğŸ“¦ Estoque</button>
        <button onclick="routeMenu('vendas')" id="menuVenBtn">ğŸ’° Vendas</button>
        <button onclick="routeMenu('compras')" id="menuComBtn">ğŸ›’ Compras</button>
        <button onclick="routeMenu('fornecedores')" id="menuForBtn">ğŸ¢ Fornecedores</button>
        <button onclick="routeMenu('clientes')" id="menuCliBtn">ğŸ‘¥ Clientes</button>
        <button onclick="routeMenu('relatorios')" id="menuRelBtn">ğŸ“Š RelatÃ³rios</button>
        <button onclick="routeMenu('usuarios')" id="menuUsuBtn">ğŸ‘¤ UsuÃ¡rios</button>
        <button onclick="routeMenu('informacoes')" id="menuInfoBtn">â„¹ï¸ InformaÃ§Ãµes</button>
        <button class="close-menu" onclick="toggleMenu()">âœ–ï¸ Fechar Menu</button>
      </div>
    </div>

    <!-- DASHBOARD -->
    <section id="secDashboard">
      <h2>ğŸ  Dashboard</h2>
      <div class="notification">
        <b>ğŸ’¡ Dica:</b> Use o menu <b>â˜°</b> no topo para acessar todas as funcionalidades do sistema: controle de estoque, registro de vendas e geraÃ§Ã£o de relatÃ³rios em PDF.
      </div>
      
      <div class="dashboard-grid">
        <div class="dashboard-card">
          <h3>ğŸ›’ Ãšltima Compra</h3>
          <div class="stat-number" id="totalCompras">R$ 0,00</div>
          <div class="stat-label">Total em Compras</div>
          <div id="ultimaCompra">
            <!-- Ãšltima compra serÃ¡ exibida aqui -->
          </div>
        </div>
        
        <div class="dashboard-card">
          <h3>ğŸ“ˆ EstatÃ­sticas de Vendas</h3>
          <div class="stat-number" id="totalVendas">R$ 0,00</div>
          <div class="stat-label">Total em Vendas</div>
          <div class="stat-number" id="totalProdutosVendidos">0</div>
          <div class="stat-label">Produtos Vendidos</div>
        </div>
        
        <div class="dashboard-card">
          <h3>ğŸ“¦ SituaÃ§Ã£o do Estoque</h3>
          <div class="stat-number" id="totalItensEstoque">0</div>
          <div class="stat-label">Itens em Estoque</div>
          <div class="stat-number" id="produtosBaixoEstoque">0</div>
          <div class="stat-label">Produtos com Estoque Baixo</div>
        </div>
        
        <div class="dashboard-card">
          <h3>ğŸ“Š Produtos Mais Vendidos</h3>
          <div class="chart-container" id="chartProdutosVendidos">
            <!-- Produtos mais vendidos serÃ£o exibidos aqui -->
          </div>
        </div>
      </div>
    </section>

    <!-- ESTOQUE/PRODUTOS -->
    <section id="secProdutos" class="hidden">
      <h2>ğŸ“¦ Estoque de Insumos e Produtos</h2>
      
      <div style="display: flex; gap: 10px; margin-bottom: 15px;">
        <button class="btn-lista" onclick="toggleListaEstoque()" id="btnVerLista">ğŸ“‹ Ver Lista</button>
        <button class="export-btn" onclick="exportTableAsPDF('tabelaEstoque', 'Estoque_SysPao.pdf')">ğŸ“„ Exportar PDF</button>
      </div>

      <div id="listaEstoqueContainer" class="hidden">
        <div class="search-filter">
          <input type="text" id="filtroEstoque" placeholder="ğŸ” Filtrar produtos..." oninput="filtrarEstoque()">
        </div>
        <div class="table-container">
          <table id="tabelaEstoque">
            <thead>
              <tr>
                <th data-sort="nome">Produto/Insumo</th>
                <th data-sort="tipo">Tipo</th>
                <th data-sort="qtd">Quantidade</th>
                <th data-sort="unidade">Unidade</th>
                <th data-sort="preco">PreÃ§o (R$)</th>
                <th data-sort="validade">Validade</th>
                <th data-sort="fornecedor">Fornecedor</th>
                <th>AÃ§Ãµes</th>
              </tr>
            </thead>
            <tbody id="estoqueBody">
            </tbody>
          </table>
        </div>
      </div>

      <details>
        <summary>â• Adicionar ou Ajustar Insumo/Produto</summary>
        <form class="form-section" onsubmit="adicionarEstoque(event)" id="formEstoque">
          <input type="hidden" id="prodIndex" value="-1">
          <div class="form-grid">
            <div class="form-grid-full">
              <label>Nome do Produto/Insumo:</label>
              <input required id="prodNome" placeholder="Ex: PÃ£o FrancÃªs">
            </div>
            <div>
              <label>Tipo:</label>
              <select id="prodTipo">
                <option value="Produto">Produto</option>
                <option value="Insumo">Insumo</option>
              </select>
            </div>
            <div>
              <label>Quantidade:</label>
              <input required type="number" min="0" step="0.01" id="prodQtd" placeholder="0">
            </div>
            <div>
              <label>Unidade:</label>
              <select id="prodUnidade">
                <option value="un">un (unidade)</option>
                <option value="kg">kg (quilograma)</option>
                <option value="g">g (grama)</option>
                <option value="litro">litro</option>
                <option value="ml">ml (mililitro)</option>
              </select>
            </div>
            <div>
              <label>PreÃ§o (R$):</label>
              <input type="number" step="0.01" min="0" id="prodPreco" placeholder="0.00">
            </div>
            <div>
              <label>Validade:</label>
              <input type="date" id="prodValidade">
            </div>
            <div>
              <label>Fornecedor:</label>
              <div class="autocomplete">
                <div class="input-with-button">
                  <input id="prodFornecedor" placeholder="Digite o nome do fornecedor" 
                         oninput="filtrarFornecedores(this.value, 'prodFornecedor')"
                         onkeydown="verificarEnterFornecedor(event, 'prodFornecedor')">
                  <button type="button" class="add-button" onclick="abrirModalFornecedor('prodFornecedor')">+</button>
                </div>
                <div id="autocomplete-prodFornecedor" class="autocomplete-items"></div>
              </div>
              <div id="erro-prodFornecedor" class="error hidden" style="margin-top:5px;"></div>
            </div>
          </div>
          <div style="display: flex; gap: 10px;">
            <button type="submit" id="btnSalvarEstoque">ğŸ’¾ Salvar</button>
            <button type="button" class="btn-limpar" onclick="limparFormEstoque()">ğŸ—‘ï¸ Limpar</button>
            <button type="button" class="btn-limpar" onclick="cancelarEdicaoEstoque()" id="btnCancelarEdicao" style="display:none;">âŒ Cancelar</button>
          </div>
        </form>
      </details>
    </section>

    <!-- VENDAS -->
    <section id="secVendas" class="hidden">
      <h2>ğŸ’° Registro de Vendas</h2>
      
      <div style="display: flex; gap: 10px; margin-bottom: 15px;">
        <button class="btn-lista" onclick="toggleListaVendas()" id="btnVerListaVendas">ğŸ“‹ Ver Lista</button>
        <button class="export-btn" onclick="exportTableAsPDF('tabelaVendas', 'Relatorio_Vendas.pdf')">ğŸ“„ Exportar PDF</button>
      </div>

      <div id="listaVendasContainer" class="hidden">
        <div class="search-filter">
          <input type="text" id="filtroVendas" placeholder="ğŸ” Filtrar vendas..." oninput="filtrarVendas()">
        </div>
        <div class="table-container">
          <table id="tabelaVendas">
            <thead>
              <tr>
                <th data-sort="data">Data</th>
                <th data-sort="produto">Produto</th>
                <th data-sort="qtd">Quantidade</th>
                <th data-sort="valor">Valor (R$)</th>
                <th data-sort="hora">HorÃ¡rio</th>
                <th data-sort="cliente">Cliente</th>
                <th data-sort="formaPagamento">Forma de Pagamento</th>
                <th>AÃ§Ãµes</th>
              </tr>
            </thead>
            <tbody id="vendasBody">
            </tbody>
          </table>
        </div>
      </div>

      <details>
        <summary>â• Registrar Nova Venda</summary>
        <form class="form-section" onsubmit="registrarVenda(event)" id="formVenda">
          <div class="form-grid">
            <div class="form-grid-full">
              <label>Produto Vendido:</label>
              <select id="vendaProduto" required onchange="atualizarPrecoVenda()">
              </select>
            </div>
            <div>
              <label>Quantidade:</label>
              <input type="number" min="1" id="vendaQtd" required value="1" onchange="atualizarPrecoVenda()">
            </div>
            <div>
              <label>PreÃ§o UnitÃ¡rio (R$):</label>
              <input type="number" step="0.01" id="vendaPrecoUnitario" required placeholder="0.00" onchange="calcularValorTotalVenda()">
            </div>
            <div>
              <label>Valor Total (R$):</label>
              <input type="number" step="0.01" id="vendaValor" required placeholder="0.00" readonly>
            </div>
            <div>
              <label>Cliente:</label>
              <div class="autocomplete">
                <div class="input-with-button">
                  <input id="vendaCliente" placeholder="Digite o nome do cliente" 
                         oninput="filtrarClientes(this.value, 'vendaCliente')"
                         onkeydown="verificarEnterCliente(event, 'vendaCliente')">
                  <button type="button" class="add-button" onclick="abrirModalCliente('vendaCliente')">+</button>
                </div>
                <div id="autocomplete-vendaCliente" class="autocomplete-items"></div>
              </div>
              <div id="erro-vendaCliente" class="error hidden" style="margin-top:5px;"></div>
            </div>
            <div>
              <label>Forma de Pagamento:</label>
              <select id="vendaFormaPagamento" required>
                <option value="">Selecione...</option>
                <option value="Pix">Pix</option>
                <option value="Dinheiro">Dinheiro</option>
                <option value="CrÃ©dito">CrÃ©dito</option>
                <option value="DÃ©bito">DÃ©bito</option>
                <option value="Fiado">Fiado</option>
              </select>
            </div>
            <div>
              <label>Data da Venda:</label>
              <input type="date" id="vendaData" required>
            </div>
          </div>
          <div style="display: flex; gap: 10px;">
            <button type="submit">âœ… Registrar Venda</button>
            <button type="button" class="btn-limpar" onclick="limparFormVenda()">ğŸ—‘ï¸ Limpar</button>
          </div>
        </form>
      </details>
    </section>

    <!-- COMPRAS -->
    <section id="secCompras" class="hidden">
      <h2>ğŸ›’ Registro de Compras</h2>
      
      <div style="display: flex; gap: 10px; margin-bottom: 15px;">
        <button class="btn-lista" onclick="toggleListaCompras()" id="btnVerListaCompras">ğŸ“‹ Ver Lista</button>
        <button class="export-btn" onclick="exportTableAsPDF('tabelaCompras', 'Relatorio_Compras.pdf')">ğŸ“„ Exportar PDF</button>
      </div>

      <div id="listaComprasContainer" class="hidden">
        <div class="search-filter">
          <input type="text" id="filtroCompras" placeholder="ğŸ” Filtrar compras..." oninput="filtrarCompras()">
        </div>
        <div class="table-container">
          <table id="tabelaCompras">
            <thead>
              <tr>
                <th data-sort="data">Data</th>
                <th data-sort="produto">Produto/Insumo</th>
                <th data-sort="qtd">Quantidade</th>
                <th data-sort="valorUnitario">Valor UnitÃ¡rio (R$)</th>
                <th data-sort="valorTotal">Valor Total (R$)</th>
                <th data-sort="fornecedor">Fornecedor</th>
                <th>AÃ§Ãµes</th>
              </tr>
            </thead>
            <tbody id="comprasBody">
            </tbody>
          </table>
        </div>
      </div>

      <details>
        <summary>â• Registrar Nova Compra</summary>
        <form class="form-section" onsubmit="registrarCompra(event)" id="formCompra">
          <div class="form-grid">
            <div class="form-grid-full">
              <label>Produto/Insumo:</label>
              <input required id="compraProduto" placeholder="Ex: Farinha de Trigo" onchange="atualizarPrecoCompra()">
            </div>
            <div>
              <label>Quantidade:</label>
              <input type="number" min="1" id="compraQtd" required value="1" onchange="calcularValorTotalCompra()">
            </div>
            <div>
              <label>Valor UnitÃ¡rio (R$):</label>
              <input type="number" step="0.01" id="compraValorUnitario" required placeholder="0.00" onchange="calcularValorTotalCompra()">
            </div>
            <div>
              <label>Valor Total (R$):</label>
              <input type="number" step="0.01" id="compraValorTotal" required placeholder="0.00" readonly>
            </div>
            <div>
              <label>Fornecedor:</label>
              <div class="autocomplete">
                <div class="input-with-button">
                  <input id="compraFornecedor" placeholder="Digite o nome do fornecedor" 
                         oninput="filtrarFornecedores(this.value, 'compraFornecedor')"
                         onkeydown="verificarEnterFornecedor(event, 'compraFornecedor')">
                  <button type="button" class="add-button" onclick="abrirModalFornecedor('compraFornecedor')">+</button>
                </div>
                <div id="autocomplete-compraFornecedor" class="autocomplete-items"></div>
              </div>
              <div id="erro-compraFornecedor" class="error hidden" style="margin-top:5px;"></div>
            </div>
            <div>
              <label>Data da Compra:</label>
              <input type="date" id="compraData" required>
            </div>
          </div>
          <div style="display: flex; gap: 10px;">
            <button type="submit">âœ… Registrar Compra</button>
            <button type="button" class="btn-limpar" onclick="limparFormCompra()">ğŸ—‘ï¸ Limpar</button>
          </div>
        </form>
      </details>
    </section>

    <!-- FORNECEDORES -->
    <section id="secFornecedores" class="hidden">
      <h2>ğŸ¢ Cadastro de Fornecedores</h2>
      
      <div style="display: flex; gap: 10px; margin-bottom: 15px;">
        <button class="btn-lista" onclick="toggleListaFornecedores()" id="btnVerListaFornecedores">ğŸ“‹ Ver Lista</button>
        <button class="export-btn" onclick="exportTableAsPDF('tabelaFornecedores', 'Fornecedores_SysPao.pdf')">ğŸ“„ Exportar PDF</button>
      </div>

      <div id="listaFornecedoresContainer" class="hidden">
        <div class="search-filter">
          <input type="text" id="filtroFornecedores" placeholder="ğŸ” Filtrar fornecedores..." oninput="filtrarFornecedores()">
        </div>
        <div class="table-container">
          <table id="tabelaFornecedores">
            <thead>
              <tr>
                <th data-sort="nome">Nome</th>
                <th data-sort="cnpj">CNPJ</th>
                <th data-sort="telefone">Telefone</th>
                <th data-sort="email">Email</th>
                <th data-sort="endereco">EndereÃ§o</th>
                <th data-sort="produtos">Produtos Fornecidos</th>
                <th>AÃ§Ãµes</th>
              </tr>
            </thead>
            <tbody id="fornecedoresBody">
            </tbody>
          </table>
        </div>
      </div>

      <details>
        <summary>â• Adicionar Fornecedor</summary>
        <form class="form-section" onsubmit="adicionarFornecedor(event)" id="formFornecedor">
          <input type="hidden" id="fornecedorIndex" value="-1">
          <div class="form-grid">
            <div>
              <label>Nome do Fornecedor:</label>
              <input required id="fornecedorNome" placeholder="Ex: TrigoTop">
            </div>
            <div>
              <label>CNPJ:</label>
              <input id="fornecedorCnpj" placeholder="00.000.000/0000-00">
            </div>
            <div>
              <label>Telefone:</label>
              <input id="fornecedorTelefone" placeholder="(71) 99999-9999">
            </div>
            <div>
              <label>Email:</label>
              <input type="email" id="fornecedorEmail" placeholder="exemplo@email.com">
            </div>
            <div class="form-grid-full">
              <label>EndereÃ§o:</label>
              <input id="fornecedorEndereco" placeholder="Rua, NÃºmero, Bairro, Cidade">
            </div>
            <div class="form-grid-full">
              <label>Produtos Fornecidos:</label>
              <input id="fornecedorProdutos" placeholder="Farinha, AÃ§Ãºcar, Fermento">
            </div>
          </div>
          <div style="display: flex; gap: 10px;">
            <button type="submit" id="btnSalvarFornecedor">ğŸ’¾ Salvar Fornecedor</button>
            <button type="button" class="btn-limpar" onclick="limparFormFornecedor()">ğŸ—‘ï¸ Limpar</button>
            <button type="button" class="btn-limpar" onclick="cancelarEdicaoFornecedor()" id="btnCancelarEdicaoFornecedor" style="display:none;">âŒ Cancelar</button>
          </div>
        </form>
      </details>
    </section>

    <!-- CLIENTES -->
    <section id="secClientes" class="hidden">
      <h2>ğŸ‘¥ Cadastro de Clientes</h2>
      
      <div style="display: flex; gap: 10px; margin-bottom: 15px;">
        <button class="btn-lista" onclick="toggleListaClientes()" id="btnVerListaClientes">ğŸ“‹ Ver Lista</button>
        <button class="export-btn" onclick="exportTableAsPDF('tabelaClientes', 'Clientes_SysPao.pdf')">ğŸ“„ Exportar PDF</button>
      </div>

      <div id="listaClientesContainer" class="hidden">
        <div class="search-filter">
          <input type="text" id="filtroClientes" placeholder="ğŸ” Filtrar clientes..." oninput="filtrarClientes()">
        </div>
        <div class="table-container">
          <table id="tabelaClientes">
            <thead>
              <tr>
                <th data-sort="nome">Nome</th>
                <th data-sort="cpf">CPF</th>
                <th data-sort="telefone">Telefone</th>
                <th data-sort="endereco">EndereÃ§o</th>
                <th>AÃ§Ãµes</th>
              </tr>
            </thead>
            <tbody id="clientesBody">
            </tbody>
          </table>
        </div>
      </div>

      <details>
        <summary>â• Adicionar Cliente</summary>
        <form class="form-section" onsubmit="adicionarCliente(event)" id="formCliente">
          <input type="hidden" id="clienteIndex" value="-1">
          <div class="form-grid">
            <div>
              <label>Nome do Cliente:</label>
              <input required id="clienteNome" placeholder="Ex: JoÃ£o Silva">
            </div>
            <div>
              <label>CPF:</label>
              <input id="clienteCpf" placeholder="000.000.000-00">
            </div>
            <div>
              <label>Telefone:</label>
              <input id="clienteTelefone" placeholder="(71) 99999-9999">
            </div>
            <div class="form-grid-full">
              <label>EndereÃ§o:</label>
              <input id="clienteEndereco" placeholder="Rua, NÃºmero, Bairro, Cidade">
            </div>
          </div>
          <div style="display: flex; gap: 10px;">
            <button type="submit" id="btnSalvarCliente">ğŸ’¾ Salvar Cliente</button>
            <button type="button" class="btn-limpar" onclick="limparFormCliente()">ğŸ—‘ï¸ Limpar</button>
            <button type="button" class="btn-limpar" onclick="cancelarEdicaoCliente()" id="btnCancelarEdicaoCliente" style="display:none;">âŒ Cancelar</button>
          </div>
        </form>
      </details>
    </section>

    <!-- RELATÃ“RIOS -->
    <section id="secRelatorios" class="hidden">
      <h2>ğŸ“Š RelatÃ³rios Gerenciais</h2>
      
      <div class="export-buttons">
        <button class="btn-lista" onclick="toggleListaRelatorios()" id="btnVerListaRelatorios">ğŸ“‹ Ver Lista</button>
        <button class="export-btn" onclick="exportRelatorioPDF()">ğŸ“„ Exportar PDF</button>
        <button class="export-btn" onclick="exportRelatorioExcel()" style="background:linear-gradient(135deg, #217346 0%, #1e5e3b 100%);">ğŸ“Š Exportar Excel</button>
        <button class="export-btn" onclick="salvarRelatorioAtual()" style="background:linear-gradient(135deg, #17a2b8 0%, #138496 100%);">ğŸ’¾ Salvar RelatÃ³rio</button>
      </div>

      <div id="listaRelatoriosContainer" class="hidden">
        <div class="search-filter">
          <input type="text" id="filtroRelatorios" placeholder="ğŸ” Filtrar relatÃ³rios..." oninput="filtrarRelatorios()">
        </div>
        <div class="table-container">
          <table id="tabelaRelatorios">
            <thead>
              <tr>
                <th data-sort="tipo">Tipo</th>
                <th data-sort="dataCriacao">Data de CriaÃ§Ã£o</th>
                <th data-sort="descricao">DescriÃ§Ã£o</th>
                <th>AÃ§Ãµes</th>
              </tr>
            </thead>
            <tbody id="relatoriosBody">
            </tbody>
          </table>
        </div>
      </div>

      <details>
        <summary>ğŸ” Gerar RelatÃ³rio</summary>
        <div class="filters">
          <h3 style="margin-top:0;">ğŸ” Filtros de Pesquisa</h3>
          <div class="filters-grid">
            <div class="filter-item">
              <label for="relTipo">Tipo de RelatÃ³rio:</label>
              <select id="relTipo" onchange="atualizarRelatorio()">
                <option value="vendas">ğŸ’° Vendas</option>
                <option value="estoque">ğŸ“¦ Estoque</option>
                <option value="compras">ğŸ›’ Compras</option>
                <option value="fornecedores">ğŸ¢ Fornecedores</option>
                <option value="clientes">ğŸ‘¥ Clientes</option>
                <option value="lucro">ğŸ’µ Lucro/PrejuÃ­zo</option>
              </select>
            </div>
            <div class="filter-item">
              <label for="filtroProduto">Produto/Insumo:</label>
              <div class="filter-select-container">
                <input type="text" id="filtroProduto" placeholder="Todos" readonly onclick="abrirModalSelecaoProduto()" style="cursor: pointer;">
                <span class="filter-icon" onclick="abrirModalSelecaoProduto()">ğŸ”</span>
              </div>
            </div>
            <div class="filter-item">
              <label for="filtroInicio">Data InÃ­cio:</label>
              <input type="date" id="filtroInicio">
            </div>
            <div class="filter-item">
              <label for="filtroFim">Data Fim:</label>
              <input type="date" id="filtroFim">
            </div>
            <div class="filter-item">
              <label for="filtroFornecedor">Fornecedor:</label>
              <div class="filter-select-container">
                <input type="text" id="filtroFornecedor" placeholder="Todos" readonly onclick="abrirModalSelecaoFornecedor()" style="cursor: pointer;">
                <span class="filter-icon" onclick="abrirModalSelecaoFornecedor()">ğŸ”</span>
              </div>
            </div>
            <div class="filter-item">
              <label for="filtroCliente">Cliente:</label>
              <div class="filter-select-container">
                <input type="text" id="filtroCliente" placeholder="Todos" readonly onclick="abrirModalSelecaoCliente()" style="cursor: pointer;">
                <span class="filter-icon" onclick="abrirModalSelecaoCliente()">ğŸ”</span>
              </div>
            </div>
            <div class="filter-item">
              <label for="filtroFormaPagamento">Forma de Pagamento:</label>
              <select id="filtroFormaPagamento" onchange="atualizarRelatorio()">
                <option value="">Todas as formas</option>
                <option value="Pix">Pix</option>
                <option value="Dinheiro">Dinheiro</option>
                <option value="CrÃ©dito">CrÃ©dito</option>
                <option value="DÃ©bito">DÃ©bito</option>
                <option value="Fiado">Fiado</option>
              </select>
            </div>
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button type="button" onclick="gerarRelatorio()">ğŸ“Š Gerar RelatÃ³rio</button>
            <button type="button" class="btn-limpar" onclick="limparFiltrosRelatorio()">ğŸ—‘ï¸ Limpar</button>
          </div>
        </div>
        <div id="relatorioContent" style="margin-top:25px;"></div>
      </details>
    </section>

    <!-- USUÃRIOS -->
    <section id="secUsuarios" class="hidden">
      <h2>ğŸ‘¤ Gerenciamento de UsuÃ¡rios</h2>
      
      <div style="display: flex; gap: 10px; margin-bottom: 15px;">
        <button class="btn-lista" onclick="toggleListaUsuarios()" id="btnVerListaUsuarios">ğŸ“‹ Ver Lista</button>
      </div>

      <div id="listaUsuariosContainer" class="hidden">
        <div class="search-filter">
          <input type="text" id="filtroUsuarios" placeholder="ğŸ” Filtrar usuÃ¡rios..." oninput="filtrarUsuarios()">
        </div>
        <div class="table-container">
          <table id="tabelaUsuarios">
            <thead>
              <tr>
                <th>Foto</th>
                <th>Nome</th>
                <th>UsuÃ¡rio</th>
                <th>Tipo</th>
                <th>Data de Cadastro</th>
                <th>AÃ§Ãµes</th>
              </tr>
            </thead>
            <tbody id="usuariosBody">
            </tbody>
          </table>
        </div>
      </div>

      <details>
        <summary>â• Adicionar Novo UsuÃ¡rio</summary>
        <form class="form-section" onsubmit="adicionarUsuario(event)" id="formUsuario">
          <input type="hidden" id="usuarioIndex" value="-1">
          <input type="hidden" id="usuarioFotoBase64" value="">
          
          <div class="user-photo-container">
            <img id="usuarioFotoPreview" class="user-photo-preview" src="" style="display:none;" onclick="visualizarFoto(this.src)">
            <div id="semFotoTexto" style="text-align: center; color: #666; margin-bottom: 10px;">ğŸ“· Sem foto</div>
            <div class="photo-buttons">
              <button type="button" class="photo-btn" onclick="tirarFoto()">ğŸ“¸ Tirar Foto</button>
              <button type="button" class="photo-btn" onclick="carregarFoto()">ğŸ–¼ï¸ Carregar Imagem</button>
              <button type="button" class="photo-btn btn-limpar" onclick="removerFoto()" style="background:linear-gradient(135deg, #6c757d 0%, #5a6268 100%);">ğŸ—‘ï¸ Remover Foto</button>
            </div>
            <input type="file" id="fotoInput" accept="image/*" style="display:none;" onchange="processarFotoCarregada(this)">
          </div>
          
          <div class="form-grid">
            <div>
              <label>Nome Completo:</label>
              <input required id="usuarioNome" placeholder="Nome do usuÃ¡rio">
            </div>
            <div>
              <label>Nome de UsuÃ¡rio:</label>
              <input required id="usuarioLogin" placeholder="Login para acesso">
            </div>
            <div>
              <label>Senha:</label>
              <input type="password" required id="usuarioSenha" placeholder="Senha">
            </div>
            <div>
              <label>Tipo de UsuÃ¡rio:</label>
              <select id="usuarioTipo">
                <option value="admin">Administrador</option>
                <option value="vendedor">Vendedor</option>
                <option value="estoque">Estoque</option>
              </select>
            </div>
          </div>
          <div style="display: flex; gap: 10px;">
            <button type="submit" id="btnSalvarUsuario">ğŸ’¾ Cadastrar UsuÃ¡rio</button>
            <button type="button" class="btn-limpar" onclick="limparFormUsuario()">ğŸ—‘ï¸ Limpar</button>
            <button type="button" class="btn-limpar" onclick="cancelarEdicaoUsuario()" id="btnCancelarEdicaoUsuario" style="display:none;">âŒ Cancelar</button>
          </div>
        </form>
      </details>
    </section>

    <!-- INFORMAÃ‡Ã•ES -->
    <section id="secInformacoes" class="hidden">
      <h2>â„¹ï¸ InformaÃ§Ãµes do Sistema</h2>
      
      <div class="dashboard-card">
        <h3>â“ Sobre o Sistema</h3>
        <p>O Sistema de InformaÃ§Ã£o Gerencial <b>ğŸ¥– Sys PÃ£o</b> para a <b>Padaria PÃ£o Quentinho</b> foi desenvolvido para facilitar o controle e gestÃ£o do negÃ³cio, integrando informaÃ§Ãµes de estoque, vendas e relatÃ³rios inteligentes.</p><br>
        <p><strong>Nome:</strong> Sys PÃ£o - Sistema de GestÃ£o</p>
        <p><strong>VersÃ£o:</strong> 1.0</p>
        <p><strong>Desenvolvido por:</strong> Leandro Yata</p>
        <p><strong>Data de Desenvolvimento:</strong> 2025</p>
      </div>

      <div class="dashboard-card">
        <h3>ğŸ“‹ Resumo do NegÃ³cio</h3>
        <p><strong>Empresa:</strong> Padaria PÃ£o Quentinho</p>
        <p><strong>Segmento:</strong> PanificaÃ§Ã£o e confeitaria artesanal</p>
        <p><strong>Produtos:</strong> PÃ£es, doces, salgados, bolos, cafÃ© e encomendas especiais</p>
        <p><strong>Tamanho:</strong> Pequena empresa (<20 funcionÃ¡rios)</p>
      </div>

      <div class="dashboard-card">
        <h3>ğŸ”§ Funcionalidades</h3>
        <ul>
          <li>Controle completo de estoque</li>
          <li>Registro de vendas e compras</li>
          <li>GestÃ£o de fornecedores</li>
          <li>GestÃ£o de clientes</li>
          <li>RelatÃ³rios gerenciais</li>
          <li>Dashboard com mÃ©tricas</li>
          <li>ExportaÃ§Ã£o em PDF</li>
          <li>Multi-usuÃ¡rio com diferentes nÃ­veis de acesso</li>
        </ul>
      </div>

      <div class="dashboard-card">
        <h3>âœ… Problema Resolvido</h3>
        <p>A padaria enfrentava dificuldades com controle manual e descentralizado do estoque, resultando em desperdÃ­cios, perdas e falta de produtos em horÃ¡rios de pico. Com este Sistema de InformaÃ§Ã£o Gerencial (SIG) ğŸ¥– Sys PÃ£o, Ã© possÃ­vel registrar vendas e entradas de insumos, filtrar relatÃ³rios e identificar rapidamente o que precisa de atenÃ§Ã£o no estoque e desempenho dos produtos.</p>
      </div>
    </section>

    <!-- Modal para visualizar foto -->
    <div class="photo-modal" id="photoModal">
      <span class="close-modal" onclick="fecharModal()">&times;</span>
      <div class="photo-modal-content">
        <img id="modalFoto" class="photo-modal-img" src="">
      </div>
    </div>

    <!-- Modal para tirar foto -->
    <div class="simple-modal" id="cameraModal">
      <div class="simple-modal-content" style="max-width: 500px;">
        <div class="simple-modal-header">
          <h3>ğŸ“¸ Tirar Foto</h3>
          <button class="close-simple-modal" onclick="fecharCamera()">&times;</button>
        </div>
        <div class="simple-modal-body">
          <div id="cameraPreview" style="width: 100%; height: 300px; background: #000; margin-bottom: 15px;">
            <video id="videoElement" autoplay playsinline style="width: 100%; height: 100%; object-fit: cover;"></video>
            <canvas id="canvasElement" style="display:none;"></canvas>
          </div>
          <div class="simple-modal-buttons">
            <button onclick="capturarFoto()">ğŸ“· Capturar</button>
            <button class="btn-limpar" onclick="fecharCamera()">âŒ Cancelar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal simples para adicionar fornecedor -->
    <div class="simple-modal" id="fornecedorModal">
      <div class="simple-modal-content">
        <div class="simple-modal-header">
          <h3>â• Adicionar Fornecedor</h3>
          <button class="close-simple-modal" onclick="fecharModalFornecedor()">&times;</button>
        </div>
        <div class="simple-modal-body">
          <label>Nome do Fornecedor:</label>
          <input type="text" id="novoFornecedorNome" placeholder="Digite o nome do fornecedor">
          <div class="simple-modal-buttons">
            <button onclick="salvarFornecedorRapido()">ğŸ’¾ Salvar</button>
            <button class="btn-limpar" onclick="fecharModalFornecedor()">âŒ Cancelar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de seleÃ§Ã£o de Produto para RelatÃ³rios -->
    <div class="simple-modal" id="selecaoProdutoModal">
      <div class="simple-modal-content" style="max-width: 500px;">
        <div class="simple-modal-header">
          <h3>ğŸ“¦ Selecionar Produto/Insumo</h3>
          <button class="close-simple-modal" onclick="fecharModalSelecaoProduto()">&times;</button>
        </div>
        <div class="simple-modal-body">
          <input type="text" id="buscaProdutoRelatorio" placeholder="ğŸ” Digite para buscar (lista aparece ao digitar)" oninput="filtrarProdutosModal()" onkeydown="handleKeydownProdutosModal(event)" style="margin-bottom: 15px;">
          <div class="modal-lista" id="listaProdutosModal" style="max-height: 300px; overflow-y: auto; border: 1px solid #e0d0c0; border-radius: 8px; padding: 10px;">
            <!-- Lista de produtos serÃ¡ preenchida aqui -->
          </div>
          <div class="simple-modal-buttons" style="margin-top: 15px;">
            <button onclick="selecionarTodosProdutos()">âœ… Todos</button>
            <button onclick="carregarTodosProdutosModal()">ğŸ“¥ Listar todos (carregar)</button>
            <button class="btn-limpar" onclick="fecharModalSelecaoProduto()">âŒ Cancelar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de seleÃ§Ã£o de Fornecedor para RelatÃ³rios -->
    <div class="simple-modal" id="selecaoFornecedorModal">
      <div class="simple-modal-content" style="max-width: 500px;">
        <div class="simple-modal-header">
          <h3>ğŸ¢ Selecionar Fornecedor</h3>
          <button class="close-simple-modal" onclick="fecharModalSelecaoFornecedor()">&times;</button>
        </div>
        <div class="simple-modal-body">
          <input type="text" id="buscaFornecedorRelatorio" placeholder="ğŸ” Digite para buscar (lista aparece ao digitar)" oninput="filtrarFornecedoresModal()" onkeydown="handleKeydownFornecedoresModal(event)" style="margin-bottom: 15px;">
          <div class="modal-lista" id="listaFornecedoresModal" style="max-height: 300px; overflow-y: auto; border: 1px solid #e0d0c0; border-radius: 8px; padding: 10px;">
            <!-- Lista de fornecedores serÃ¡ preenchida aqui -->
          </div>
          <div class="simple-modal-buttons" style="margin-top: 15px;">
            <button onclick="selecionarTodosFornecedores()">âœ… Todos</button>
            <button onclick="carregarTodosFornecedoresModal()">ğŸ“¥ Listar todos (carregar)</button>
            <button class="btn-limpar" onclick="fecharModalSelecaoFornecedor()">âŒ Cancelar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de seleÃ§Ã£o de Cliente para RelatÃ³rios -->
    <div class="simple-modal" id="selecaoClienteModal">
      <div class="simple-modal-content" style="max-width: 500px;">
        <div class="simple-modal-header">
          <h3>ğŸ‘¥ Selecionar Cliente</h3>
          <button class="close-simple-modal" onclick="fecharModalSelecaoCliente()">&times;</button>
        </div>
        <div class="simple-modal-body">
          <input type="text" id="buscaClienteRelatorio" placeholder="ğŸ” Digite para buscar (lista aparece ao digitar)" oninput="filtrarClientesModal()" onkeydown="handleKeydownClientesModal(event)" style="margin-bottom: 15px;">
          <div class="modal-lista" id="listaClientesModal" style="max-height: 300px; overflow-y: auto; border: 1px solid #e0d0c0; border-radius: 8px; padding: 10px;">
            <!-- Lista de clientes serÃ¡ preenchida aqui -->
          </div>
          <div class="simple-modal-buttons" style="margin-top: 15px;">
            <button onclick="selecionarTodosClientes()">âœ… Todos</button>
            <button onclick="carregarTodosClientesModal()">ğŸ“¥ Listar todos (carregar)</button>
            <button class="btn-limpar" onclick="fecharModalSelecaoCliente()">âŒ Cancelar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal simples para adicionar cliente -->
    <div class="simple-modal" id="clienteModal">
      <div class="simple-modal-content">
        <div class="simple-modal-header">
          <h3>â• Adicionar Cliente</h3>
          <button class="close-simple-modal" onclick="fecharModalCliente()">&times;</button>
        </div>
        <div class="simple-modal-body">
          <label>Nome do Cliente:</label>
          <input type="text" id="novoClienteNome" placeholder="Digite o nome do cliente">
          <div class="simple-modal-buttons">
            <button onclick="salvarClienteRapido()">ğŸ’¾ Salvar</button>
            <button class="btn-limpar" onclick="fecharModalCliente()">âŒ Cancelar</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    ğŸ¥– PADARIA PÃƒO QUENTINHO | <span id="footerDataHora"></span>
  </footer>

  <!-- jsPDF e Chart.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="js/script.js"></script>
</body>
</html>
